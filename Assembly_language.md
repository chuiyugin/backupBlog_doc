---
title: 汇编语言
tags:
  - 汇编语言
categories:
  - 汇编语言
date: 2024-7-1 22:00:00
excerpt: 汇编语言的学习与分享总结!
---
# 汇编语言
## 第一章 基础知识

### 内存的读写和地址空间

#### CPU 对存储器的读写

CPU 想要进行数据的读写，必须和外部器件进行三类信息的交互：
+ 存储单元的地址（**地址信息**）
+ 器件的选择，读或写命令（**控制信息**）
+ 读或写的数据（**数据信息**）

#### 内存地址空间

+ 定义：CPU 地址总线宽度为 $N$，寻址空间为 $2^{N}$ 字节。
+ 举例：8086 CPU 的地址总线宽度为 20，那么可以寻址的内存单位个数为 $2^{20}$ =1 MB，称其内存地址空间为 1 MB。
+ 将各类存储器看作一个逻辑存储器（**统一编址**）
+ 所有的物理存储器被看作一个由若干存储单元组成的逻辑存储器；
+ 每个物理存储器在这个逻辑存储器中占有一个地址段，即一段地址空间。

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240712162944.png)

+ 举例：8086 PC 机的内存地址空间分配基本情况：

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240712163105.png)

## 第二章 寄存器

一个典型的CPU由**运算器**、**控制器**、**寄存器**等器件组成，这些器件靠**内部总线**相连。

区分**内部总线**与**外部总线**：

* **内部总线**实现CPU**内部各个器件**之间的联系。
* **外部总线**实现**CPU和主板上其他器件**的联系。

简单而言，在CPU中：

* 运算器进行信息处理；
* 寄存器进行信息存储；
* 控制器控制各种器件进行工作；
* 内部总线连接各种器件，在它们之间进行数据传送；

其中，寄存器是 CPU 中程序员可以用**指令读写**的部件，可以通过改变各种寄存器中的内容来实现对 CPU 的控制。

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240712212819.png)

### 通用寄存器

8086CPU中所有寄存器都是16位的，可以存放**两个字节**的数据。

存放一般性数据的寄存器成为通用寄存器，有AX、BX、CX、DX四个通用寄存器。

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/202310101250059.png)

为了保证与上一代的8位寄存器兼容，8086CPU中的通用寄存器AX、BX、CX、DX都可以分为两个可以独立使用的8位寄存器。

* AX可分为AH和AL；
* BX可分为BH和BL；
* CX可分为CH和CL；
* DX可分为DH和DL；

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/202310101250451.png)
### 字在寄存器的存储

+ 8086是16位CPU

  + 8086的字长(word size)为**16bit**
  + 字节：记为**Byte**，一个字节由**8个bit**组成，可以存在**8位寄存器**中；
  + 字：记为**Word**，对于**16位**的8086CPU而言，一个字由**两个字节**组成，这两个字节分别称为这个字的**高位字节**和**低位字节**。

+ 需要特别注意**字的定义**：

  + 计算机进行数据处理时，一次存取、加工和传送的数据长度称为字。然而，这可能会**根据系统的不同而变化**。例如，在`32`位的系统中，一个字由`32`位组成。在`64`位的系统中，一个字由`64`位组成。所以，虽然`16`位通常被称为一个字，但这可能会根据具体的计算机系统而有所不同。
### 几条汇编指令

+ 通过汇编指令控制 CPU 进行工作，下表有常见的几条指令：

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240712160854.png)

+ 注意：汇编语言**不区分**大小写

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240713213811.png)

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240713213948.png)

### 确定物理地址的方法
#### 物理地址
- CPU 访问内存单元时要给出内存单元的地址。
- 所有的内存单元构成的存储空间是一个一维的线性空间。
- 每一个内存单元在这个空间中都有唯一的地址，这个唯一的地址称为**物理地址**。
#### 8086 CPU 物理地址示例
##### 示例
  - 8086 CPU 有 `20位` 地址总线，可传送 `20位` 地址，寻址能力为 `1M`。
  - 8086 是 `16位` 结构的 CPU
	  -  运算器一次**最多**可以处理 `16位` 的数据，寄存器的最大宽度为 `16位`。
	  - 在 8086 CPU 内部处理的、传输、暂存的地址也是 `16位`，寻址能力也只有 `64KB`！

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240713215522.png)

##### 解决方案

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240713215903.png)

+ 方法：物理地址=段地址×16+偏移地址

![](https://yugin-blog-1313489805.cos.ap-guangzhou.myqcloud.com/20240713220232.png)

##### 本质含义
+ 要解决的问题：
	+ 用**两个 16 位**的地址（段地址、偏移地址），相加得到一个 `20位` 的物理地址。
+ 本质含义：
	+ CPU 在访问内存时，用一个基础地址（段地址×16）和一个相对于基础地址的偏移地址相加，给出内存单元的物理地址。
